<div class="zepto-home">

  <!-- CATEGORY STRIP -->
  <section class="category-strip">
    <div class="category-item" *ngFor="let cat of categories" (click)="selectCategory(cat)">
      <div class="category-img">
        <img [src]="cat.image" alt="{{ cat.name }}" />
      </div>
      <div class="category-label">
        {{ cat.name }}
      </div>
    </div>
  </section>


  <!-- OFFER BANNERS -->
  <section class="offer-section">
    <div class="offer-card primary">
      <h3>₹0 Convenience Fee</h3>
      <p>On all nearby shop orders</p>
      <button>Order now</button>
    </div>

    <div class="offer-card secondary">
      <h3>Lowest Prices Everyday</h3>
      <p>No surge, no rain fee</p>
    </div>
  </section>

  <!-- SHOP BY CATEGORY -->
  <!-- <section class="section">
    <div class="section-header">
      <h2>Shop by Category</h2>
      <span class="view-all">View all</span>
    </div>

    <div class="horizontal-scroll">
      <div class="category-card" *ngFor="let cat of categories">
        <img [src]="cat.image" />
        <span>{{ cat.name }}</span>
      </div>
    </div>
  </section> -->

  <section class="section" *ngFor="let shelf of categoryShelves; let i = index">

    <!-- HEADER -->
    <div class="section-header">
      <h2>{{ shelf.categoryName }}</h2>
      <span class="view-all" [routerLink]="['/category', shelf.categorySlug]">
        View all
      </span>
    </div>

    <!-- PRODUCT CAROUSEL -->
    <div class="horizontal-scroll" (scroll)="onHorizontalScroll($event, shelf.categorySlug)">

      <!-- PRODUCTS -->
      <div class="product-card" *ngFor="let product of shelf.products">

        <img [src]="product.image" />
        <div class="product-name">{{ product.name }}</div>
        <div class="price">₹{{ product.final_price }}</div>

      </div>

      <!-- LOADER -->
      <div class="product-skeleton" *ngIf="shelf.loading">
      </div>

    </div>

    <!-- VERTICAL LAZY LOAD TRIGGER -->
    <div class="vertical-loader" *ngIf="i === categoryShelves.length - 1" appIntersectionObserver
      (visible)="loadNextCategoryShelf()">
    </div>

  </section>


  <!-- STORES -->
  <section class="section">
    <div class="section-header">
      <h2>Popular Stores Near You</h2>
      <span class="view-all">View all</span>
    </div>

    <div class="horizontal-scroll">
      <div class="store-card" *ngFor="let store of stores">
        <img [src]="store.shop_image" />
        <span>{{ store.shop_name }}</span>
      </div>
    </div>
  </section>

  <!-- PROMO BANNERS -->
  <section class="promo-section">
    <div class="promo-card" *ngFor="let banner of processedBanners">
      <img [src]="banner.image" />
    </div>
  </section>

</div>