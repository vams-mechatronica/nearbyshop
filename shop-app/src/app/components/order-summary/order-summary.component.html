<!-- PRINT BUTTON (hidden while printing) -->
<div class="container mt-3 text-end no-print">
  <button class="btn btn-outline-dark" (click)="printInvoice()">
    üñ®Ô∏è Print Invoice
  </button>
</div>

<!-- INVOICE CONTAINER -->

<div id="invoice-print-area" class="invoice">
  <div class="container mt-4 invoice-wrapper" *ngIf="!isLoading && orderSummary">
    <div class="card shadow-sm p-4 invoice">

      <!-- HEADER -->
      <div class="row align-items-center mb-4 border-bottom pb-3">
        <div class="col-md-6">
          <img src="assets/logo/thenearbyshop.png" alt="Logo" class="invoice-logo" />
        </div>
        <div class="col-md-6 text-end">
          <h5 class="mb-1">Tax Invoice / Bill of Supply</h5>
          <small>(Original for Recipient)</small>
        </div>
      </div>

      <!-- SELLER & BUYER -->
      <div class="row mb-4">
        <div class="col-md-6">
          <h6>Sold By:</h6>
          <p class="mb-1"><strong>VAMS Mechatronica Pvt Ltd</strong></p>
          <p class="mb-1">Bengaluru, Karnataka</p>
          <p class="mb-1">GSTIN: 09AAICV4649M1ZJ</p>
        </div>

        <div class="col-md-6 text-end">
          <h6>Billing Address:</h6>
          <p class="mb-1">{{ orderSummary.address.billing_address }}</p>
          <p class="mb-1">State Code: 29</p>
        </div>
      </div>

      <!-- ORDER INFO -->
      <div class="row mb-4">
        <div class="col-md-6">
          <p><strong>Order ID:</strong> VAMS/2026/{{ orderSummary.id }}</p>
          <p><strong>Order Date:</strong> {{ orderSummary.created_at | date:'mediumDate' }}</p>
        </div>
        <div class="col-md-6 text-end">
          <p><strong>Payment Method:</strong> {{ getPaymentMethodLabel(orderSummary.payment_method) }}</p>
          <p>
            <strong>Status:</strong>
            <span class="badge bg-success" *ngIf="orderSummary.status === 'Completed'">Paid</span>
            <span class="badge bg-danger" *ngIf="orderSummary.status !== 'Completed'">Unpaid</span>
          </p>
        </div>
      </div>

      <!-- ITEMS TABLE -->
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of orderSummary.items; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ item.product }}</td>
              <td>{{ item.quantity }}</td>
              <td>‚Çπ{{ item.price }}</td>
              <td>‚Çπ{{ getItemTotal(item) }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- TOTALS -->
      <div class="row justify-content-end mt-3">
        <div class="col-md-5">
          <table class="table table-borderless">
            <tr *ngIf="orderSummary.coupon">
              <td>Discount</td>
              <td class="text-end">- ‚Çπ{{ orderSummary.coupon.discount_value }}</td>
            </tr>
            <tr class="border-top">
              <th>Total Amount</th>
              <th class="text-end text-success">‚Çπ{{ orderSummary.total_price }}</th>
            </tr>
          </table>
        </div>
      </div>

      <!-- FOOTER -->
      <div class="text-center mt-4">
        <small>This is a system generated invoice and does not require signature.</small>
      </div>

    </div>
  </div>
</div>
<!-- LOADING -->
<div class="container mt-4" *ngIf="isLoading">
  <div class="text-center">
    <div class="spinner-border text-primary mb-3"></div>
    <p>Loading invoice...</p>
  </div>
</div>